<box type="container">
  <box type="xl error" icon="warning" flex="true" url="https://tvtracker.co.za">
    <div class="text-center" style="width: 100%;">
      <h3 class="text-center">BETA SITE</h3>
    </div><br>Currently a work in progress. For the current site go to https://tvtracker.co.za
  </box>
</box>

<box type="container">
  <box type="xl" flex="true">
    Soon enough you will be able to keep track of your favourite shows, and know exactly when that next episode will be coming out.
  </box>
</box>

<app-alerts></app-alerts>

<!-- No shows yet, add some now -->
<div class="listing" *ngIf="!favorites || favorites.length == 0">
  <box type="container">
    <box type="xl" flex="true">
      <form novalidate #searchForm="ngForm" (ngSubmit)="searchForSeries()">
        <label for="search">
          <div class="input-label">Find a show to track now</div>
          <div class="input-group">
            <input
              id="search"
              type="text"
              placeholder="Game of Thrones"
              name="search"
              [(ngModel)]="search"
            />
            <button type="submit" value="Search" (click)="searchForSeries()"><i class="icon-search"></i></button>
          </div>
        </label>
      </form>
    </box>
  </box>
</div>

<div class="container row col swiper-container-outer" *ngIf="favorites && favorites.length > 0">
  <h3>Coming Soon</h3>
  <div id="future-pagination" class="swiper-pagination"></div>
  <div id="future-prev" class="swiper-button-prev"></div>
  <div id="future-next" class="swiper-button-next"></div>

  <div class="swiper-container swiper-container-future">
    <div class="swiper-wrapper">
      <div class="swiper-slide episode" *ngFor="let episode of futureEpisodes">
        <div class="swiper-lazy-preloader"></div>
        <a [routerLink]="['/show/', episode.slug]" class="inner">
          <h4 class="heading" *ngIf="episode.seriesname">{{episode.seriesname}} - {{episode.key}}</h4>
          <div class="airtime" *ngIf="episode.human_time">{{episode.human_time}}</div>
          <div class="poster" *ngIf="getImagePoster(episode)">
            <img width="100" height="auto" [attr.data-src]="getImagePoster(episode)" class="poster-img swiper-lazy" />
          </div>
        </a>
      </div>
    </div>
    <div class="swiper-scrollbar"></div>
  </div>
</div>

<div class="container row col swiper-container-outer" *ngIf="favorites && favorites.length > 0">
  <h3>Recent Episodes</h3>
  <div id="recent-pagination" class="swiper-pagination"></div>
  <div id="recent-prev" class="swiper-button-prev"></div>
  <div id="recent-next" class="swiper-button-next"></div>

  <div class="swiper-container swiper-container-recent">
    <div class="swiper-wrapper">
      <div class="swiper-slide episode" *ngFor="let episode of recentEpisodes">
        <div class="swiper-lazy-preloader"></div>
        <a [routerLink]="['/show/', episode.slug]" class="inner" *ngIf="!episode.test">
          <h4 class="heading" *ngIf="episode.seriesname">{{episode.seriesname}} - {{episode.key}}</h4>
          <div class="airtime" *ngIf="episode.human_time">{{episode.human_time}}</div>
          <div class="poster" *ngIf="getImagePoster(episode)">
            <img width="100" height="auto" [attr.data-src]="getImagePoster(episode)" class="poster-img swiper-lazy" />
          </div>
        </a>
      </div>
    </div>
    <div class="swiper-scrollbar"></div>
  </div>
</div>

<div class="listing" *ngIf="favorites && favorites.length > 0">
  <h3>Favorite Shows</h3>

  <box type="container">
    <box type="md" flex="true">
      <div *ngIf="!searching" class="btn" (click)="searching=true">Find more shows <i class="icon-search"></i></div>
      <form novalidate #searchForm="ngForm" (ngSubmit)="searchForSeries()" *ngIf="searching">
        <label for="search">
          <div class="input-label">Find a new show to track</div>
          <div class="input-group">
            <input
              id="search"
              type="text"
              placeholder="Game of Thrones"
              name="search"
              [(ngModel)]="search"
            />
            <button type="submit" value="Search" (click)="searchForSeries()"><i class="icon-search"></i></button>
          </div>
        </label>
      </form>
    </box>

    <box type="md" flex="true">
      <div *ngIf="!filtering" class="btn" (click)="filtering=true">Filter my shows <i class="icon-filter"></i></div>
      <form novalidate #filterForm="ngForm" *ngIf="filtering">
        <label for="filter">
          <div class="input-label">Filter my shows</div>
          <input
            id="filter"
            type="text"
            placeholder="Game of Thrones"
            name="filter"
            [(ngModel)]="filter"
          />
        </label>
      </form>
    </box>
  </box>

  <div class="row grid-row">
    <div class="col-sm-6 col-md-3 col-lg-2 col-2" *ngFor="let episode of favorites | search:'seriesname,overview':filter">
      <div class="episode user-favorites">
        <a [routerLink]="['/show/', episode.slug]" class="inner" *ngIf="!episode.test">
          <h4 class="heading" *ngIf="episode.seriesname">{{episode.seriesname}}</h4>
          <div class="airtime" *ngIf="episode.human_time">{{episode.human_time}}</div>
          <div class="poster" *ngIf="getImagePoster(episode)">
            <img width="100" height="auto" [src]="getImagePoster(episode)" class="poster-img swiper-lazy" />
          </div>
          <div
            (click)="removeFavorite($event, episode)"
            title="Untrack {{episode.seriesname}}"
            class="btn action"
          >
            <i class="icon-empty-hart" *ngIf="!removing[episode.seriesid]"></i>
            <i class="icon-spin icon-spinner" *ngIf="removing[episode.seriesid]"></i>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>
